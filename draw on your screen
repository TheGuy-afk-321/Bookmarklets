javascript:!function(){var e,t,n=document.getElementById("draw-on-page-canvas");if(n){n.parentNode.removeChild(n);var o=document.getElementById("controls-div");o.parentNode.removeChild(o);return}(n=document.createElement("canvas")).id="draw-on-page-canvas",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.border="2px solid rgba(255, 255, 0, 0.3)";var i=window.devicePixelRatio||2;n.width=(window.innerWidth-20)*i,n.height=window.innerHeight*i,n.style.width=window.innerWidth-20+"px",n.style.height=window.innerHeight+"px",n.style.zIndex="9998";var r=n.getContext("2d");r.scale(i,i),r.strokeStyle="#FFAB01%22;var%20s=1.5;r.lineWidth=s,r.lineCap=%22round%22,r.lineJoin=%22round%22,document.body.appendChild(n);var%20a=!1,l=[];localStorage.getItem(%22canvasDrawing%22);var%20p=document.createElement(%22div%22);function%20d(e,t,n){var%20o=Math.sqrt((n.x-t.x)**2+(n.y-t.y)**2);if(0===o)return%20Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2);var%20i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/o**2;i=Math.max(0,Math.min(1,i));var%20r=t.x+i*(n.x-t.x),s=t.y+i*(n.y-t.y);return%20Math.sqrt((e.x-r)**2+(e.y-s)**2)}p.id=%22controls-div%22,p.style.zIndex=%229999%22,p.style.fontSize=%2212px%22,document.body.appendChild(p);var%20c=[],u=1,h=%22%22;function%20y(e,t,n,o,i){return(e-t)/(n-t)*(i-o)+o}let%20$=e=%3Ee.reduce((e,t)=%3Ee+t)/e.length;function%20v(e){var%20t,o,i;a&&(e.preventDefault(),e.changedTouches?(t=e.changedTouches[0].pageX-n.offsetLeft,o=e.changedTouches[0].pageY-n.offsetTop-window.pageYOffset,i=e.changedTouches[0].force||.5):(t=e.pageX-n.offsetLeft,o=e.pageY-n.offsetTop-window.pageYOffset,i=%22pen%22===e.pointerType&&e.pressure?e.pressure:.5),c.push({x:t,y:o,pressure:i}),r.putImageData(l[l.length-1],0,0),function%20e(t){for(var%20n=function%20e(t,n){if(t.length%3C=2)return%20t;for(var%20o=0,i=0,r=1;r%3Ct.length-1;r++){var%20s=d(t[r],t[0],t[t.length-1]);s%3Eo&&(o=s,i=r)}if(!(o%3En))return[t[0],t[t.length-1]];var%20a=e(t.slice(0,i+1),n),l=e(t.slice(i),n);return%20a.slice(0,-1).concat(l)}(t,1),o=0;o%3Cn.length-1;o++){var%20i=o%3E0?n[o-1]:n[o],a=n[o],l=n[o+1],p=o%3Cn.length-2?n[o+2]:l,c=a.x+(l.x-i.x)/6,h=a.y+(l.y-i.y)/6,v=l.x-(p.x-a.x)/6,f=l.y-(p.y-a.y)/6;if(r.beginPath(),r.moveTo(a.x,a.y),_){var%20g=(Math.min(i.pressure,a.pressure,l.pressure,p.pressure)+$([i.pressure,a.pressure,l.pressure,p.pressure]))/2*s;r.lineWidth=y(g,0,1,.5*s,3*s*u)}else{var%20g=s*u;r.lineWidth=g}r.bezierCurveTo(c,h,v,f,l.x,l.y),r.stroke()}}(c))}function%20f(e,t,n,o,i){var%20r=document.createElement(%22button%22);return%20r.textContent=n?e:t,r.style.position=%22fixed%22,r.style.top=o,r.style.right=%2220px%22,r.style.zIndex=%229999%22,p.appendChild(r),r.addEventListener(%22click%22,i),r}n.addEventListener(%22mousedown%22,function%20o(i){a=!0,e=i.pageX-n.offsetLeft,t=i.pageY-n.offsetTop-window.pageYOffset,l.push(r.getImageData(0,0,n.width,n.height)),l=l.slice(-20)}),n.addEventListener(%22touchstart%22,function%20o(i){a=!0,e=i.changedTouches[0].pageX-n.offsetLeft,t=i.changedTouches[0].pageY-n.offsetTop-window.pageYOffset,l.push(r.getImageData(0,0,n.width,n.height)),l=l.slice(-20)}),n.addEventListener(%22mousemove%22,v),n.addEventListener(%22touchmove%22,function(e){E&&%22touch%22==h?n.style.pointerEvents=%22none%22:v(e)}),n.addEventListener(%22pointerdown%22,function(e){E&&%22touch%22==e.pointerType&&(n.style.pointerEvents=%22none%22)}),n.addEventListener(%22mouseup%22,function(){a=!1,c=[];var%20e=n.toDataURL();localStorage.setItem(%22canvasDrawing%22,e)}),n.addEventListener(%22touchend%22,function(){a=!1,c=[];var%20e=n.toDataURL();localStorage.setItem(%22canvasDrawing%22,e),setTimeout(()=%3E{n.style.pointerEvents=%22auto%22,function%20e(){if(%22auto%22==n.style.pointerEvents){console.log(%22Loop%20stopped%22);return}n.style.pointerEvents=%22none%22,setTimeout(()=%3E{n.style.pointerEvents=%22auto%22,e()},110),n.style.pointerEvents=%22auto%22,setTimeout(e,103)}()},%221000%22)}),n.addEventListener(%22pointermove%22,function(e){pressure=e.pressure,h=e.pointerType});var%20g=!1,x=f(%22erasing%20(active)%22,%22erase%22,g,%2270px%22,function(){g?(x.textContent=%22erase%22,r.globalCompositeOperation=%22source-over%22,g=!1):(g=!0,x.textContent=%22erasing%20(active)%22,r.globalCompositeOperation=%22destination-out%22)});f(%22undo%22,%22%22,!0,%22105px%22,function(){l.length%3E1?(l.pop(),r.putImageData(l[l.length-1],0,0)):(r.clearRect(0,0,n.width,n.height),l.pop())});var%20_=!0,m=f(%22\uD83D\uDD8D%22,%22\uD83D\uDD8C%22,_,%22140px%22,function(){_?(m.textContent=%22\uD83D\uDD8C%22,_=!1):(_=!0,m.textContent=%22\uD83D\uDD8D%22)}),E=!1,C=f(%22use%20hands%22,%22reject%20palm%22,E,%22170px%22,function(){E?(C.textContent=%22reject%20palm%22,E=!1):(E=!0,C.textContent=%22use%20hands%22)});f(%22clear%22,%22%22,!0,%22220px%22,function(){r.clearRect(0,0,n.width,n.height),c=[],l=[]});var%20b=!1,L=f(%22activate%20(disabled)%22,%22disable%22,b,%22250px%22,function(){b?(L.textContent=%22disable%22,n.style.pointerEvents=%22auto%22,b=!1):(b=!0,L.textContent=%22activate%20(disabled)%22,n.style.pointerEvents=%22none%22)});[%22black%22,%22#02498c%22,%22#FFAB01%22,%22#5bc936%22,%22#ef3228%22,%22white%22].forEach(function(e,t){var%20n=document.createElement(%22button%22);n.style.backgroundColor=e,n.style.width=%2220px%22,n.style.height=%2220px%22,n.style.borderRadius=%225%%22,n.style.position=%22fixed%22,n.style.top=%2210px%22,n.style.right=20+22*t+%22px%22,n.style.zIndex=%229999%22,p.appendChild(n),n.addEventListener(%22click%22,function(){r.strokeStyle=e,u=1,r.globalCompositeOperation=%22source-over%22})}),[%22rgba(245,%20232,%2039,%200.1)%22].forEach(function(e,t){var%20n=document.createElement(%22button%22);n.style.backgroundColor=e,n.style.width=%2220px%22,n.style.height=%2220px%22,n.style.borderRadius=%225%%22,n.style.position=%22fixed%22,n.style.top=%2230px%22,n.style.right=20+22*t+%22px%22,n.style.zIndex=%229999%22,p.appendChild(n),n.addEventListener(%22click%22,function(){r.strokeStyle=e,u=20,r.globalCompositeOperation=%22multiply%22})});var%20w=document.createElement(%22input%22);w.type=%22color%22,w.value=%22#02498c%22,w.style.zIndex=%229999%22,w.style.position=%22fixed%22,w.style.top=%2210px%22,w.style.right=%22150px%22,p.appendChild(w),w.addEventListener(%22change%22,function(){r.strokeStyle=w.value});var%20I=document.createElement(%22input%22);I.type=%22range%22,I.min=%221%22,I.max=%2210%22,I.value=s,I.style.position=%22fixed%22,I.style.top=%2250px%22,I.style.right=%2220px%22,I.style.zIndex=%229999%22,I.style.width=%22100px%22,p.appendChild(I),I.addEventListener(%22input%22,function(){s=I.value,r.lineWidth=s,console.info(r.lineWidth)})}();
